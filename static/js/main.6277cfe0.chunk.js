(this.webpackJsonpwhatsupkent=this.webpackJsonpwhatsupkent||[]).push([[0],{118:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a.n(c),s=a(85),l=a(34),i=(a(98),a(160)),u=a(22),m=(a(99),a(133)),d=a(61),v=a(29),p=a.n(v),f=a(41),E=a(42),h=a.n(E);function b(e){var t=new Date(e);t.setHours(5),t.setMinutes(0),t.setSeconds(0);var a=t.getDay(),n=t.getDate()-a;return new Date(t.setDate(n))}function D(e){var t=new Date(e);t.setHours(5),t.setMinutes(0),t.setSeconds(0);var a=t.getDay(),n=t.getDate()+(6-a);return new Date(t.setDate(n))}function j(e){var t="";return e.forEach((function(e){t="".concat(t+e.value," ")})),t}function w(e){for(var t="",a=e.length-1;a>=0;a-=1)t="".concat(t,'"').concat(e[a].value,'"'),0!==a&&(t="".concat(t,","));return t}function g(e){var t=String(e.getMinutes());return"".concat(e.getHours(),":").concat(t.padStart(2,"0"))}var y="https://api.whatsupkent.com/";function S(){return(S=Object(f.a)(p.a.mark((function e(t){var a,n,r,c,o,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.subjects.length>0?"@filter(eq(module.subject, [".concat(w(t.subjects),"]))"):"",n=t.eventTypes.length>0?'and anyofterms(event.title, "'.concat(j(t.eventTypes),'")'):"",r="\n{filteredWeekView(func: has(module.subject), orderasc: module.subject, orderasc: module.code, first: 2000) ".concat(a,"{\ncode: module.code\nsubject: module.subject\nname: module.name\nevents: ~event.part_of_module @filter(gt(event.start_date,").concat(t.startDate.toISOString().split("T")[0],") and le(event.end_date, ").concat(t.endDate.toISOString().split("T")[0],") ").concat(n,") {\n  id: event.id\n  title: event.title\n  description: event.description\n  startDate: event.start_date\n  endDate: event.end_date\n  location: event.location {\n    name: location.name\n    id: location.id\n    disabledAccess: location.disabled_access\n}}}}\n  "),e.prev=3,e.next=6,h.a.post(y,r,{headers:{"Content-Type":"application/json"}});case 6:return c=e.sent,o=c.data,s=new Array,o.filteredWeekView.forEach((function(e){if(e.events){var t={code:e.code,name:e.name,subject:e.subject};e.events.forEach((function(e){var a=e;a.module=[t],s.push(a)}))}})),e.abrupt("return",s);case 13:return e.prev=13,e.t0=e.catch(3),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function N(){return(N=Object(f.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\n  {subjects(func: has(module.subject), orderasc: module.subject, first: 4000){subject: module.subject}}",e.prev=1,e.next=4,h.a.post(y,"\n  {subjects(func: has(module.subject), orderasc: module.subject, first: 4000){subject: module.subject}}",{headers:{"Content-Type":"application/json"}});case 4:return t=e.sent,a=t.data,n=new Array,a.subjects.forEach((function(e){n.includes(e.subject)||n.push(e.subject)})),e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}a(118);var O,T={startDate:b(new Date),endDate:D(new Date),subjects:new Array,eventTypes:new Array};!function(e){e[e.UPDATE=0]="UPDATE"}(O||(O={}));var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.UPDATE:return t.payload;default:return e}};function A(e){return e}var C=Object(n.createContext)(T);var I=function(){var e=Object(n.useContext)(C),t=e.filterState,a=e.dispatch,c=Object(n.useState)(),o=Object(u.a)(c,2),s=o[0],l=o[1];Object(n.useEffect)((function(){l(function(e){var t=new Array;return e.forEach((function(e){t.push({value:e,label:e})})),t}(["LECTURE","SEMINAR","PRESENTATION","LAB","INDUCTION","PC","WORKSHOP","BOOKING","MEETING","PERFORMANCE","SCREENING","LECSEM","FIELDTRIP"]))}),[]);var i=Object(n.useState)(),m=Object(u.a)(i,2),v=m[0],p=m[1];Object(n.useEffect)((function(){(function(){return N.apply(this,arguments)})().then((function(e){e&&p(function(e){var t=new Array;return e.forEach((function(e){t.push({value:e,label:e})})),t}(e))}))}),[]);return r.a.createElement("div",{className:"filterView"},r.a.createElement("span",null,"Show me"),r.a.createElement(d.a,{value:t.eventTypes,onChange:function(e){var n={startDate:t.startDate,endDate:t.endDate,subjects:t.subjects,eventTypes:e||[]};a({type:O.UPDATE,payload:n})},options:s,className:"selector",placeholder:"All",isMulti:!0}),r.a.createElement("span",null,"events for"),r.a.createElement(d.a,{value:t.subjects,onChange:function(e){var n={startDate:t.startDate,endDate:t.endDate,subjects:e||[],eventTypes:t.eventTypes};a({type:O.UPDATE,payload:n})},options:v,className:"selector",placeholder:"All subjects",isMulti:!0}))},M=a(60),P=a(57),U=a.n(P),x=a(162),H=(a(122),a(82)),_=a.n(H),R=a(81),z=a.n(R),L=a(80),W=a.n(L),q=a(79),B=a.n(q),V=a(156),G=a(78),K=a.n(G);a(123),a(124);var F=function(e){var t,a=e.event,c={title:a.title,description:a.description,startTime:a.start,endTime:a.end,location:a.location&&a.location[0].id};return r.a.createElement("div",{className:"eventHolder"},r.a.createElement("div",{className:"eventSection"},r.a.createElement("div",{className:"eventSectionIcon"},r.a.createElement(B.a,{fontSize:"small"})),r.a.createElement("div",{className:"eventSectionDeepdive"},r.a.createElement("span",{className:"bold1"},a.title),r.a.createElement("span",{className:"quiet1"},a.module&&a.module[0].name),r.a.createElement("span",{className:"quiet2"},a.module&&a.module[0].subject))),r.a.createElement("div",{className:"eventSection"},r.a.createElement("div",{className:"eventSectionIcon"},r.a.createElement(W.a,{fontSize:"small"})),r.a.createElement("div",{className:"eventSectionDeepdive"},r.a.createElement("span",{className:"quiet1"},function(e,t){if(!e||!t)return"";var a=e.toDateString(),n="".concat(g(e)," - ").concat(g(t));return"".concat(a," \u22c5 ").concat(n)}(a.start,a.end)),r.a.createElement("span",null,r.a.createElement(K.a,{buttonLabel:"Add to Calendar",event:c,listItems:[{apple:"Apple Calendar"},{google:"Google"},{outlook:"Outlook"},{outlookcom:"Outlook.com"}]})))),r.a.createElement("div",{className:"eventSection"},r.a.createElement("div",{className:"eventSectionIcon"},r.a.createElement(z.a,{fontSize:"small"})),r.a.createElement("div",{className:"eventSectionDeepdive"},r.a.createElement("span",{className:"quiet1"},r.a.createElement(V.a,{href:"http://www.kent.ac.uk/timetabling/rooms/room.html?room=".concat(a.location&&a.location[0].id),target:"_blank",rel:"noopener noreferrer"},a.location&&a.location[0].id)),r.a.createElement("span",{className:"quiet2"},a.location&&a.location[0].name))),r.a.createElement("div",{className:"eventSection"},r.a.createElement("div",{className:"eventSectionIcon"},r.a.createElement(_.a,{fontSize:"small"})),r.a.createElement("div",{className:"eventSectionDeepdive"},r.a.createElement("div",null,(t=a.description)?t.split("\\n").map((function(e,t){var a=100*Math.random()*t;return r.a.createElement(n.Fragment,{key:a},e,r.a.createElement("br",null))})):[]))))},J=Object(M.b)(U.a),$=function(e){var t=e.eventList,a=Object(n.useContext)(C),c=a.filterState,o=a.dispatch,s=r.a.useState(null),l=Object(u.a)(s,2),i=l[0],m=l[1],d=Boolean(i),v=d?"simple-popover":void 0,p=Object(n.useState)(null),f=Object(u.a)(p,2),E=f[0],h=f[1],j=new Date(Date.now()),w=new Date(Date.now());w.setMinutes(0),w.setSeconds(0),w.setHours(7);var g=new Date(w);g.setHours(22);return r.a.createElement("div",{className:"calendarContainer"},r.a.createElement(M.a,{events:t,localizer:J,startAccessor:"start",endAccessor:"end",views:["week","day","agenda"],defaultView:"week",scrollToTime:j,min:w,max:g,onRangeChange:function(e){var t={startDate:c.startDate,endDate:c.endDate,subjects:c.subjects,eventTypes:c.eventTypes};if(e.length)if(7===e.length)t.startDate=e[0],t.endDate=e[6],t.endDate.setHours(5);else{var a=e[0];(a<t.startDate||a>t.endDate)&&(t.startDate=b(a),t.endDate=D(a))}else t.startDate=e.start,t.endDate=e.end,t.endDate.setHours(5);t.startDate!==c.startDate&&t.endDate!==c.endDate&&o({type:O.UPDATE,payload:t})},onSelectEvent:function(e,t){h(e),function(e){m(e.currentTarget)}(t)}}),r.a.createElement(x.a,{id:v,open:d,anchorEl:i,onClose:function(){m(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}},E&&r.a.createElement(F,{event:E})))},Q=function(){var e=Object(n.useContext)(C).filterState,t=Object(n.useState)([]),a=Object(u.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){(function(e){return S.apply(this,arguments)})(e).then((function(e){if(e){var t=new Array;e.map((function(a){var n={allDay:!1,title:a.title,description:a.description,start:new Date(a.startDate),end:new Date(a.endDate),module:a.module,location:a.location,id:a.id};return t.push(n),e})),o(t)}}))}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement($,{eventList:c}))},X=function(){var e=Object(n.useReducer)(k,T,A),t=Object(u.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",{className:"MainView"},r.a.createElement("div",{className:"info"},r.a.createElement(m.a,{variant:"body1"},"See everything going on at the",r.a.createElement("a",{href:"https://www.kent.ac.uk/",target:"_blank",rel:"noopener noreferrer"}," ","University of Kent"),", without nagging all of your mates.")),r.a.createElement(C.Provider,{value:{filterState:a,dispatch:c}},r.a.createElement("div",{className:"filterHolder"},r.a.createElement(I,null)),r.a.createElement(Q,null)))},Y=a(158),Z=a(84),ee=a.n(Z),te=a(161),ae=a(164),ne=a(159),re=(a(127),function(){return r.a.createElement(Y.a,{position:"static",className:"header"},r.a.createElement(ne.a,{className:"toolbar"},r.a.createElement(m.a,{variant:"h6",className:"title"},"WhatsUpKent"),r.a.createElement(ae.a,{title:"View on GitHub",placement:"left"},r.a.createElement(te.a,{href:"https://github.com/jamesjarvis/WhatsUpKent-UI",target:"_blank",rel:"noopener"},r.a.createElement(ee.a,null)))))}),ce=a(87),oe=Object(ce.a)({palette:{primary:{main:"#444"},secondary:{main:"#3949ab"}}}),se=(a(128),function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("span",{className:"content"},r.a.createElement(m.a,{variant:"caption",gutterBottom:!0},"a"," ",r.a.createElement("a",{href:"https://jamesjarvis.io",target:"_blank",rel:"noopener noreferrer"},"James Jarvis"," ")," ","project")))}),le=function(){return r.a.createElement(s.a,null,r.a.createElement(i.a,{theme:oe},r.a.createElement(re,null),r.a.createElement("main",null,r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:X}),r.a.createElement(l.b,{path:"*"},r.a.createElement(l.a,{to:"/"})))),r.a.createElement(se,null)))};a(130),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},93:function(e,t,a){e.exports=a(131)},98:function(e,t,a){},99:function(e,t,a){}},[[93,1,2]]]);
//# sourceMappingURL=main.6277cfe0.chunk.js.map