(this.webpackJsonpwhatsupkent=this.webpackJsonpwhatsupkent||[]).push([[0],{102:function(e,t,a){e.exports=a(144)},107:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(7),l=a.n(o),s=a(56),i=a(39),u=(a(107),a(185)),m=a(17),d=a(48),v=a(65),p=a(62),f=a.n(p),E=a(177);a(111);function b(e){var t=new Date(e);t.setHours(5),t.setMinutes(0),t.setSeconds(0);var a=t.getDay(),n=t.getDate()-a;return new Date(t.setDate(n))}function h(e){var t=new Date(e);t.setHours(5),t.setMinutes(0),t.setSeconds(0);var a=t.getDay(),n=t.getDate()+(6-a);return new Date(t.setDate(n))}function D(e){var t="";return e.forEach((function(e){t="".concat(t+e.value," ")})),t}function j(e){for(var t="",a=e.length-1;a>=0;a-=1)t="".concat(t,'"').concat(e[a].value,'"'),0!==a&&(t="".concat(t,","));return t}function w(e){var t=String(e.getMinutes());return"".concat(e.getHours(),":").concat(t.padStart(2,"0"))}!function(e){e[e.UPDATE=0]="UPDATE"}(n||(n={}));var g={startDate:b(new Date),endDate:h(new Date),subjects:new Array,eventTypes:new Array},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.UPDATE:return t.payload;default:return e}};function S(e){return e}var N=Object(r.createContext)(g),O=a(86),T=a.n(O),k=a(85),A=a.n(k),C=a(84),I=a.n(C),x=a(82),_=a.n(x),M=a(176),H=a(81),P=a.n(H);a(112),a(113);var R=function(e){var t,a=e.event,n={title:a.title,description:a.description,startTime:a.start,endTime:a.end,location:a.location&&a.location[0].id};return c.a.createElement("div",{className:"eventHolder"},c.a.createElement("div",{className:"eventSection"},c.a.createElement("div",{className:"eventSectionIcon"},c.a.createElement(_.a,{fontSize:"small"})),c.a.createElement("div",{className:"eventSectionDeepdive"},c.a.createElement("span",{className:"bold1"},a.title),c.a.createElement("span",{className:"quiet1"},a.module&&a.module[0].name),c.a.createElement("span",{className:"quiet2"},a.module&&a.module[0].subject))),c.a.createElement("div",{className:"eventSection"},c.a.createElement("div",{className:"eventSectionIcon"},c.a.createElement(I.a,{fontSize:"small"})),c.a.createElement("div",{className:"eventSectionDeepdive"},c.a.createElement("span",{className:"quiet1"},function(e,t){if(!e||!t)return"";var a=e.toDateString(),n="".concat(w(e)," - ").concat(w(t));return"".concat(a," \u22c5 ").concat(n)}(a.start,a.end)),c.a.createElement("span",null,c.a.createElement(P.a,{buttonLabel:"Add to Calendar",event:n,listItems:[{apple:"Apple Calendar"},{google:"Google"},{outlook:"Outlook"},{outlookcom:"Outlook.com"}]})))),c.a.createElement("div",{className:"eventSection"},c.a.createElement("div",{className:"eventSectionIcon"},c.a.createElement(A.a,{fontSize:"small"})),c.a.createElement("div",{className:"eventSectionDeepdive"},c.a.createElement("span",{className:"quiet1"},c.a.createElement(M.a,{href:"http://www.kent.ac.uk/timetabling/rooms/room.html?room=".concat(a.location&&a.location[0].id),target:"_blank",rel:"noopener noreferrer"},a.location&&a.location[0].id)),c.a.createElement("span",{className:"quiet2"},a.location&&a.location[0].name))),c.a.createElement("div",{className:"eventSection"},c.a.createElement("div",{className:"eventSectionIcon"},c.a.createElement(T.a,{fontSize:"small"})),c.a.createElement("div",{className:"eventSectionDeepdive"},c.a.createElement("div",null,(t=a.description)?t.split("\\n").map((function(e,t){var a=100*Math.random()*t;return c.a.createElement(r.Fragment,{key:a},e,c.a.createElement("br",null))})):[]))))},U=Object(v.b)(f.a),F=function(e){var t=e.eventList,a=Object(r.useContext)(N),o=a.filterState,l=a.dispatch,s=c.a.useState(null),i=Object(m.a)(s,2),u=i[0],d=i[1],p=Boolean(u),f=p?"simple-popover":void 0,D=Object(r.useState)(null),j=Object(m.a)(D,2),w=j[0],g=j[1],y=new Date(Date.now()),S=new Date(Date.now());S.setMinutes(0),S.setSeconds(0),S.setHours(7);var O=new Date(S);O.setHours(22);return c.a.createElement("div",{className:"calendarContainer"},c.a.createElement(v.a,{events:t,localizer:U,startAccessor:"start",endAccessor:"end",views:["week","day","agenda"],defaultView:"week",scrollToTime:y,min:S,max:O,onRangeChange:function(e){var t={startDate:o.startDate,endDate:o.endDate,subjects:o.subjects,eventTypes:o.eventTypes};if(e.length)if(7===e.length)t.startDate=e[0],t.endDate=e[6],t.endDate.setHours(5);else{var a=e[0];(a<t.startDate||a>t.endDate)&&(t.startDate=b(a),t.endDate=h(a))}else t.startDate=e.start,t.endDate=e.end,t.endDate.setHours(5);t.startDate!==o.startDate&&t.endDate!==o.endDate&&l({type:n.UPDATE,payload:t})},onSelectEvent:function(e,t){g(e),function(e){d(e.currentTarget)}(t)}}),c.a.createElement(E.a,{id:f,open:p,anchorEl:u,onClose:function(){d(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}},w&&c.a.createElement(R,{event:w})))},L=a(26),V=a.n(L),q=a(45),z=a(46),W=a.n(z),B="https://api.whatsupkent.com/";function G(){return(G=Object(q.a)(V.a.mark((function e(t){var a,n,r,c,o,l;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.subjects.length>0?"@filter(eq(module.subject, [".concat(j(t.subjects),"]))"):"",n=t.eventTypes.length>0?'and anyofterms(event.title, "'.concat(D(t.eventTypes),'")'):"",r="\n{filteredWeekView(func: has(module.subject), orderasc: module.subject, orderasc: module.code, first: 2000) ".concat(a,"{\ncode: module.code\nsubject: module.subject\nname: module.name\nevents: ~event.part_of_module @filter(gt(event.start_date,").concat(t.startDate.toISOString().split("T")[0],") and le(event.end_date, ").concat(t.endDate.toISOString().split("T")[0],") ").concat(n,") {\n  id: event.id\n  title: event.title\n  description: event.description\n  startDate: event.start_date\n  endDate: event.end_date\n  location: event.location {\n    name: location.name\n    id: location.id\n    disabledAccess: location.disabled_access\n}}}}\n  "),e.prev=3,e.next=6,W.a.post(B,r,{headers:{"Content-Type":"application/json"}});case 6:return c=e.sent,o=c.data,l=new Array,o.filteredWeekView.forEach((function(e){if(e.events){var t={code:e.code,name:e.name,subject:e.subject};e.events.forEach((function(e){var a=e;a.module=[t],l.push(a)}))}})),e.abrupt("return",l);case 13:return e.prev=13,e.t0=e.catch(3),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function K(){return(K=Object(q.a)(V.a.mark((function e(){var t,a,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\n  {subjects(func: has(module.subject), orderasc: module.subject, first: 4000){subject: module.subject}}",e.prev=1,e.next=4,W.a.post(B,"\n  {subjects(func: has(module.subject), orderasc: module.subject, first: 4000){subject: module.subject}}",{headers:{"Content-Type":"application/json"}});case 4:return t=e.sent,a=t.data,n=new Array,a.subjects.forEach((function(e){n.includes(e.subject)||n.push(e.subject)})),e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function J(){return(J=Object(q.a)(V.a.mark((function e(t){var a,n,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a='\n  {\n    var(func: eq(event.start_date,"'.concat(t.startDate.toISOString().split("T")[0],'")) @filter(not (lt(event.start_date, "').concat(t.startDate.toISOString(),'")and le(event.end_date, "').concat(t.startDate.toISOString(),'"))or(ge(event.start_date,"').concat(t.endDate.toISOString(),'")and(gt(event.end_date,"').concat(t.endDate.toISOString(),'"))))  {\n      locations as event.location  { \n        location.id\n      }\n    }\n      \n    availableLocations(func: has(location.id), orderasc: location.id) @filter(not uid(locations)) {\n      id: location.id\n      name: location.name\n      disabledAccess: location.disabled_access\n    }\n  }\n  '),e.prev=1,e.next=4,W.a.post(B,a,{headers:{"Content-Type":"application/json"}});case 4:return n=e.sent,r=n.data,e.abrupt("return",r.availableLocations);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var $=function(){var e=Object(r.useContext)(N).filterState,t=Object(r.useState)([]),a=Object(m.a)(t,2),n=a[0],o=a[1];return Object(r.useEffect)((function(){(function(e){return G.apply(this,arguments)})(e).then((function(e){if(e){var t=new Array;e.map((function(a){var n={allDay:!1,title:a.title,description:a.description,start:new Date(a.startDate),end:new Date(a.endDate),module:a.module,location:a.location,id:a.id};return t.push(n),e})),o(t)}}))}),[e]),c.a.createElement(c.a.Fragment,null,c.a.createElement(F,{eventList:n}))},Q=a(66);a(134);var X=function(){var e=Object(r.useContext)(N),t=e.filterState,a=e.dispatch,o=Object(r.useState)(),l=Object(m.a)(o,2),s=l[0],i=l[1];Object(r.useEffect)((function(){i(function(e){var t=new Array;return e.forEach((function(e){t.push({value:e,label:e})})),t}(["LECTURE","SEMINAR","PRESENTATION","LAB","INDUCTION","PC","WORKSHOP","BOOKING","MEETING","PERFORMANCE","SCREENING","LECSEM","FIELDTRIP"]))}),[]);var u=Object(r.useState)(),d=Object(m.a)(u,2),v=d[0],p=d[1];Object(r.useEffect)((function(){(function(){return K.apply(this,arguments)})().then((function(e){e&&p(function(e){var t=new Array;return e.forEach((function(e){t.push({value:e,label:e})})),t}(e))}))}),[]);return c.a.createElement("div",{className:"filterView"},c.a.createElement("span",null,"Show me"),c.a.createElement(Q.a,{value:t.eventTypes,onChange:function(e){var r={startDate:t.startDate,endDate:t.endDate,subjects:t.subjects,eventTypes:e||[]};a({type:n.UPDATE,payload:r})},options:s,className:"selector",placeholder:"All",isMulti:!0}),c.a.createElement("span",null,"events for"),c.a.createElement(Q.a,{value:t.subjects,onChange:function(e){var r={startDate:t.startDate,endDate:t.endDate,subjects:e||[],eventTypes:t.eventTypes};a({type:n.UPDATE,payload:r})},options:v,className:"selector",placeholder:"All subjects",isMulti:!0}))},Y=(a(135),function(){var e=Object(r.useReducer)(y,g,S),t=Object(m.a)(e,2),a=t[0],n=t[1];return c.a.createElement("div",{className:"MainView"},c.a.createElement("div",{className:"info"},c.a.createElement(d.a,{variant:"body1"},"See everything going on at the",c.a.createElement("a",{href:"https://www.kent.ac.uk/",target:"_blank",rel:"noopener noreferrer"}," ","University of Kent"),", without nagging all of your mates.")),c.a.createElement(N.Provider,{value:{filterState:a,dispatch:n}},c.a.createElement("div",{className:"filterHolder"},c.a.createElement(X,null)),c.a.createElement($,null)))}),Z=[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"}],ee=function(){var e=new Date;return e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}(),te=new Date(ee);te.setHours(ee.getHours()+Z[0].value);var ae={startDate:ee,endDate:te,hours:Z[0]},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.UPDATE:return t.payload;default:return e}};function re(e){return e}var ce=Object(r.createContext)(ae),oe=(a(136),function(){return c.a.createElement("div",{className:"roomFilterView"},c.a.createElement(d.a,{variant:"body1"},"Showing all rooms available for the next hour"))}),le=a(95),se=a(188),ie=a(87),ue=a.n(ie),me=(a(137),function(e){var t=e.room;return c.a.createElement(le.a,{className:"location"},c.a.createElement("span",{className:"locationSection"},c.a.createElement(M.a,{href:"http://www.kent.ac.uk/timetabling/rooms/room.html?room=".concat(t.id),target:"_blank",rel:"noopener noreferrer"},c.a.createElement(d.a,{variant:"h5"},t.id)),t.disabledAccess&&c.a.createElement(se.a,{title:"This room is accessible",placement:"right"},c.a.createElement(ue.a,{color:"secondary"}))),c.a.createElement("span",{className:"locationSection"},c.a.createElement(d.a,{variant:"body2"},t.name)))}),de=(a(138),function(){var e=Object(r.useContext)(ce).filterState,t=Object(r.useState)([]),a=Object(m.a)(t,2),n=a[0],o=a[1];return Object(r.useEffect)((function(){(function(e){return J.apply(this,arguments)})(e).then((function(e){e&&o(e)}))}),[e]),c.a.createElement(ve,{rooms:n})}),ve=function(e){var t=e.rooms;return c.a.createElement("div",{className:"roomsView"},t.map((function(e,t){var a=100*Math.random()*t;return c.a.createElement(me,{room:e,key:a})})))},pe=(a(139),function(){var e=Object(r.useReducer)(ne,ae,re),t=Object(m.a)(e,2),a=t[0],n=t[1];return c.a.createElement("div",{className:"roomView"},c.a.createElement("div",{className:"info"},c.a.createElement(d.a,{variant:"body1"},"Need a room? Find a room.")),c.a.createElement(ce.Provider,{value:{filterState:a,dispatch:n}},c.a.createElement("div",{className:"filterHolder"},c.a.createElement(oe,null)),c.a.createElement(de,null)))}),fe=a(181),Ee=a(186),be=a(183),he=a(184),De=a(187),je=a(179),we=a(180),ge=a(182),ye=a(90),Se=a.n(ye),Ne=a(92),Oe=a.n(Ne),Te=a(89),ke=a.n(Te),Ae=a(91),Ce=a.n(Ae);a(140);function Ie(e){var t=e.icon,a=e.primary,n=e.to,r=c.a.useMemo((function(){return c.a.forwardRef((function(e,t){return c.a.createElement(s.b,Object.assign({to:n},e,{innerRef:t}))}))}),[n]);return c.a.createElement("li",null,c.a.createElement(De.a,{button:!0,component:r},t?c.a.createElement(je.a,null,t):null,c.a.createElement(we.a,{primary:a})))}var xe=function(){var e=Object(r.useState)(!1),t=Object(m.a)(e,2),a=t[0],n=t[1],o=function(e){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&n(e)}};return c.a.createElement(c.a.Fragment,null,c.a.createElement(fe.a,{position:"static",className:"header"},c.a.createElement(ge.a,{className:"toolbar"},c.a.createElement("span",{className:"mainText"},c.a.createElement(be.a,{color:"inherit","aria-label":"open drawer",onClick:o(!0),edge:"start"},c.a.createElement(ke.a,null)),c.a.createElement(d.a,{variant:"h6",className:"title"},"WhatsUpKent")),c.a.createElement(se.a,{title:"View on GitHub",placement:"left"},c.a.createElement(be.a,{href:"https://github.com/jamesjarvis/WhatsUpKent-UI",target:"_blank",rel:"noopener"},c.a.createElement(Se.a,null))))),c.a.createElement(Ee.a,{open:a,onClose:o(!1)},c.a.createElement(he.a,null,c.a.createElement(Ie,{to:"/",primary:"All Events",icon:c.a.createElement(Ce.a,null)}),c.a.createElement(Ie,{to:"/rooms",primary:"Free Room Finder",icon:c.a.createElement(Oe.a,null)}))))},_e=a(93),Me=Object(_e.a)({palette:{primary:{main:"#444"},secondary:{main:"#3949ab"}}}),He=(a(142),function(){return c.a.createElement("footer",{className:"footer"},c.a.createElement("span",{className:"content"},c.a.createElement(d.a,{variant:"caption",gutterBottom:!0},"a"," ",c.a.createElement("a",{href:"https://jamesjarvis.io",target:"_blank",rel:"noopener noreferrer"},"James Jarvis"," ")," ","project")))}),Pe=function(){return c.a.createElement(s.a,null,c.a.createElement(u.a,{theme:Me},c.a.createElement(xe,null),c.a.createElement("main",null,c.a.createElement(i.d,null,c.a.createElement(i.b,{exact:!0,path:"/",component:Y}),c.a.createElement(i.b,{exact:!0,path:"/rooms",component:pe}),c.a.createElement(i.b,{path:"*"},c.a.createElement(i.a,{to:"/"})))),c.a.createElement(He,null)))};a(143),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(Pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[102,1,2]]]);
//# sourceMappingURL=main.c6111ce4.chunk.js.map