(this.webpackJsonpwhatsupkent=this.webpackJsonpwhatsupkent||[]).push([[0],{33:function(e,t,n){e.exports=n(63)},38:function(e,t,n){},57:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(2),s=n.n(c),u=n(9),o=(n(38),n(18)),i=n(7),l=n.n(i),d=n(10),f=n(11),v=n.n(f);function p(e){var t=new Date(e);t.setHours(5),t.setMinutes(0),t.setSeconds(0);var n=t.getDay(),a=t.getDate()-n;return new Date(t.setDate(a))}function b(e){var t="";return e.forEach((function(e){t="".concat(t+e.value," ")})),t}function m(e){for(var t="",n=e.length-1;n>=0;n-=1)t="".concat(t,'"').concat(e[n].value,'"'),0!==n&&(t="".concat(t,","));return t}function h(){return(h=Object(d.a)(l.a.mark((function e(t){var n,a,r,c,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.subjects.length>0?"@filter(eq(module.subject, [".concat(m(t.subjects),"]))"):"",a=t.eventTypes.length>0?'and anyofterms(event.title, "'.concat(b(t.eventTypes),'")'):"",r="\n  {\n    filteredWeekView(func: has(module.subject), orderasc: module.subject, orderasc: module.code) ".concat(n,"{\n      code: module.code\n      subject: module.subject\n      name: module.name\n      events: ~event.part_of_module @filter(gt(event.start_date,").concat(t.startDate.toISOString().split("T")[0],") and le(event.end_date, ").concat(t.endDate.toISOString().split("T")[0],") ").concat(a,") {\n        id: event.id\n        title: event.title\n        description: event.description\n        startDate: event.start_date\n        endDate: event.end_date\n        location: event.location {\n          name: location.name\n          id: location.id\n          disabledAccess: location.disabled_access\n        }\n      }\n    }\n  }\n  "),e.prev=3,e.next=6,v.a.post("/query",r,{headers:{"Content-Type":"application/json"}});case 6:return c=e.sent,s=c.data,u=new Array,s.filteredWeekView.forEach((function(e){e.events&&e.events.forEach((function(e){u.push(e)}))})),e.abrupt("return",u);case 13:return e.prev=13,e.t0=e.catch(3),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function j(){return(j=Object(d.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\n  {\n    subjects(func: has(module.subject), orderasc: module.subject, first: 4000) {\n      subject: module.subject\n    }\n  }\n  ",e.prev=1,e.next=4,v.a.post("/query","\n  {\n    subjects(func: has(module.subject), orderasc: module.subject, first: 4000) {\n      subject: module.subject\n    }\n  }\n  ",{headers:{"Content-Type":"application/json"}});case 4:return t=e.sent,n=t.data,a=new Array,n.subjects.forEach((function(e){a.includes(e.subject)||a.push(e.subject)})),e.abrupt("return",a);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}n(57);var E,w={startDate:p(new Date),endDate:function(e){var t=new Date(e);t.setHours(5),t.setMinutes(0),t.setSeconds(0);var n=t.getDay(),a=t.getDate()+(6-n);return new Date(t.setDate(a))}(new Date),subjects:new Array,eventTypes:new Array};!function(e){e[e.UPDATE=0]="UPDATE"}(E||(E={}));var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.UPDATE:return t.payload;default:return e}};function y(e){return e}var O=Object(a.createContext)(w);var T=function(){var e=Object(a.useContext)(O),t=e.filterState,n=e.dispatch,c=Object(a.useState)(),s=Object(u.a)(c,2),i=s[0],l=s[1];Object(a.useEffect)((function(){l(function(e){var t=new Array;return e.forEach((function(e){t.push({value:e,label:e})})),t}(["LECTURE","SEMINAR","PRESENTATION","LAB","INDUCTION","PC","WORKSHOP","BOOKING","MEETING","PERFORMANCE","SCREENING","LECSEM","FIELDTRIP"]))}),[]);var d=Object(a.useState)(),f=Object(u.a)(d,2),v=f[0],p=f[1];Object(a.useEffect)((function(){(function(){return j.apply(this,arguments)})().then((function(e){e&&p(function(e){var t=new Array;return e.forEach((function(e){t.push({value:e,label:e})})),t}(e))}))}),[]);return r.a.createElement("div",{className:"filterView"},r.a.createElement("span",null,"Show me"),r.a.createElement(o.a,{value:t.eventTypes,onChange:function(e){var a={startDate:t.startDate,endDate:t.endDate,subjects:t.subjects,eventTypes:e||[]};n({type:E.UPDATE,payload:a})},options:i,className:"selector",placeholder:"All",isMulti:!0}),r.a.createElement("span",null,"events for"),r.a.createElement(o.a,{value:t.subjects,onChange:function(e){var a={startDate:t.startDate,endDate:t.endDate,subjects:e||[],eventTypes:t.eventTypes};n({type:E.UPDATE,payload:a})},options:v,className:"selector",placeholder:"All subjects",isMulti:!0}))},A=n(17),g=n(32),S=n.n(g),N=(n(61),Object(A.b)(S.a)),C=function(e){var t=e.eventList,n=new Date(Date.now()),a=new Date(Date.now());a.setMinutes(0),a.setSeconds(0),a.setHours(7);var c=new Date(a);return c.setHours(22),r.a.createElement("div",{className:"calendarContainer"},r.a.createElement(A.a,{events:t,localizer:N,startAccessor:"start",endAccessor:"end",views:["week","day","agenda"],defaultView:"week",scrollToTime:n,min:a,max:c}))},k=function(){var e=Object(a.useContext)(O),t=e.filterState,n=(e.dispatch,Object(a.useState)([])),c=Object(u.a)(n,2),s=c[0],o=c[1];return Object(a.useEffect)((function(){(function(e){return h.apply(this,arguments)})(t).then((function(e){if(e){var t=new Array;e.map((function(n){var a={allDay:!1,title:n.title,start:new Date(n.startDate),end:new Date(n.endDate)};return t.push(a),e})),o(t)}}))}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{eventList:s}))},I=function(){var e=Object(a.useReducer)(D,w,y),t=Object(u.a)(e,2),n=t[0],c=t[1];return r.a.createElement("div",{className:"App"},r.a.createElement(O.Provider,{value:{filterState:n,dispatch:c}},r.a.createElement("div",{className:"filterHolder"},r.a.createElement(T,null)),r.a.createElement(k,null)))};n(62),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.8f1d2cad.chunk.js.map