(this.webpackJsonpwhatsupkent=this.webpackJsonpwhatsupkent||[]).push([[0],{57:function(e,t,n){e.exports=n(91)},62:function(e,t,n){},81:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(6),s=n.n(r),o=n(12),l=(n(62),n(35)),i=n(16),u=n.n(i),d=n(23),v=n(24),m=n.n(v);function p(e){var t=new Date(e);t.setHours(5),t.setMinutes(0),t.setSeconds(0);var n=t.getDay(),a=t.getDate()-n;return new Date(t.setDate(a))}function f(e){var t=new Date(e);t.setHours(5),t.setMinutes(0),t.setSeconds(0);var n=t.getDay(),a=t.getDate()+(6-n);return new Date(t.setDate(a))}function E(e){var t="";return e.forEach((function(e){t="".concat(t+e.value," ")})),t}function D(e){for(var t="",n=e.length-1;n>=0;n-=1)t="".concat(t,'"').concat(e[n].value,'"'),0!==n&&(t="".concat(t,","));return t}function b(e){var t=String(e.getMinutes());return"".concat(e.getHours(),":").concat(t.padStart(2,"0"))}function h(){return(h=Object(d.a)(u.a.mark((function e(t){var n,a,c,r,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.subjects.length>0?"@filter(eq(module.subject, [".concat(D(t.subjects),"]))"):"",a=t.eventTypes.length>0?'and anyofterms(event.title, "'.concat(E(t.eventTypes),'")'):"",c="\n  {\n    filteredWeekView(func: has(module.subject), orderasc: module.subject, orderasc: module.code, first: 2000) ".concat(n,"{\n      code: module.code\n      subject: module.subject\n      name: module.name\n      events: ~event.part_of_module @filter(gt(event.start_date,").concat(t.startDate.toISOString().split("T")[0],") and le(event.end_date, ").concat(t.endDate.toISOString().split("T")[0],") ").concat(a,") {\n        id: event.id\n        title: event.title\n        description: event.description\n        startDate: event.start_date\n        endDate: event.end_date\n        location: event.location {\n          name: location.name\n          id: location.id\n          disabledAccess: location.disabled_access\n        }\n      }\n    }\n  }\n  "),e.prev=3,e.next=6,m.a.post("/query",c,{headers:{"Content-Type":"application/json"}});case 6:return r=e.sent,s=r.data,o=new Array,s.filteredWeekView.forEach((function(e){if(e.events){var t={code:e.code,name:e.name,subject:e.subject};e.events.forEach((function(e){var n=e;n.module=[t],o.push(n)}))}})),e.abrupt("return",o);case 13:return e.prev=13,e.t0=e.catch(3),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function j(){return(j=Object(d.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\n  {\n    subjects(func: has(module.subject), orderasc: module.subject, first: 4000) {\n      subject: module.subject\n    }\n  }\n  ",e.prev=1,e.next=4,m.a.post("/query","\n  {\n    subjects(func: has(module.subject), orderasc: module.subject, first: 4000) {\n      subject: module.subject\n    }\n  }\n  ",{headers:{"Content-Type":"application/json"}});case 4:return t=e.sent,n=t.data,a=new Array,n.subjects.forEach((function(e){a.includes(e.subject)||a.push(e.subject)})),e.abrupt("return",a);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}n(81);var w,S={startDate:p(new Date),endDate:f(new Date),subjects:new Array,eventTypes:new Array};!function(e){e[e.UPDATE=0]="UPDATE"}(w||(w={}));var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.UPDATE:return t.payload;default:return e}};function N(e){return e}var g=Object(a.createContext)(S);var O=function(){var e=Object(a.useContext)(g),t=e.filterState,n=e.dispatch,r=Object(a.useState)(),s=Object(o.a)(r,2),i=s[0],u=s[1];Object(a.useEffect)((function(){u(function(e){var t=new Array;return e.forEach((function(e){t.push({value:e,label:e})})),t}(["LECTURE","SEMINAR","PRESENTATION","LAB","INDUCTION","PC","WORKSHOP","BOOKING","MEETING","PERFORMANCE","SCREENING","LECSEM","FIELDTRIP"]))}),[]);var d=Object(a.useState)(),v=Object(o.a)(d,2),m=v[0],p=v[1];Object(a.useEffect)((function(){(function(){return j.apply(this,arguments)})().then((function(e){e&&p(function(e){var t=new Array;return e.forEach((function(e){t.push({value:e,label:e})})),t}(e))}))}),[]);return c.a.createElement("div",{className:"filterView"},c.a.createElement("span",null,"Show me"),c.a.createElement(l.a,{value:t.eventTypes,onChange:function(e){var a={startDate:t.startDate,endDate:t.endDate,subjects:t.subjects,eventTypes:e||[]};n({type:w.UPDATE,payload:a})},options:i,className:"selector",placeholder:"All",isMulti:!0}),c.a.createElement("span",null,"events for"),c.a.createElement(l.a,{value:t.subjects,onChange:function(e){var a={startDate:t.startDate,endDate:t.endDate,subjects:e||[],eventTypes:t.eventTypes};n({type:w.UPDATE,payload:a})},options:m,className:"selector",placeholder:"All subjects",isMulti:!0}))},T=n(34),A=n(50),C=n.n(A),I=n(108),k=(n(85),n(55)),P=n.n(k),M=n(54),x=n.n(M),H=n(53),R=n.n(H),q=n(51),U=n.n(q);n(86);var z=function(e){var t,n=e.event;return c.a.createElement("div",{className:"eventHolder"},c.a.createElement("div",{className:"eventSection"},c.a.createElement("div",{className:"eventSectionIcon"},c.a.createElement(U.a,{fontSize:"small"})),c.a.createElement("div",{className:"eventSectionDeepdive"},c.a.createElement("span",{className:"bold1"},n&&n.title),c.a.createElement("span",{className:"quiet1"},n&&n.module&&n.module[0].name),c.a.createElement("span",{className:"quiet2"},n&&n.module&&n.module[0].subject))),c.a.createElement("div",{className:"eventSection"},c.a.createElement("div",{className:"eventSectionIcon"},c.a.createElement(R.a,{fontSize:"small"})),c.a.createElement("div",{className:"eventSectionDeepdive"},c.a.createElement("span",{className:"quiet1"},n&&function(e,t){if(!e||!t)return"";var n=e.toDateString(),a="".concat(b(e)," - ").concat(b(t));return"".concat(n," \u22c5 ").concat(a)}(n.start,n.end)))),c.a.createElement("div",{className:"eventSection"},c.a.createElement("div",{className:"eventSectionIcon"},c.a.createElement(x.a,{fontSize:"small"})),c.a.createElement("div",{className:"eventSectionDeepdive"},c.a.createElement("span",{className:"quiet1"},n&&n.location&&n.location[0].id),c.a.createElement("span",{className:"quiet2"},n&&n.location&&n.location[0].name))),c.a.createElement("div",{className:"eventSection"},c.a.createElement("div",{className:"eventSectionIcon"},c.a.createElement(P.a,{fontSize:"small"})),c.a.createElement("div",{className:"eventSectionDeepdive"},c.a.createElement("div",null,n&&((t=n.description)?t.split("\\n").map((function(e,t){var n=100*Math.random()*t;return c.a.createElement(a.Fragment,{key:n},e,c.a.createElement("br",null))})):[])))))},_=Object(T.b)(C.a),L=function(e){var t=e.eventList,n=Object(a.useContext)(g),r=n.filterState,s=n.dispatch,l=c.a.useState(null),i=Object(o.a)(l,2),u=i[0],d=i[1],v=Boolean(u),m=v?"simple-popover":void 0,E=Object(a.useState)(null),D=Object(o.a)(E,2),b=D[0],h=D[1],j=new Date(Date.now()),S=new Date(Date.now());S.setMinutes(0),S.setSeconds(0),S.setHours(7);var y=new Date(S);y.setHours(22);return c.a.createElement("div",{className:"calendarContainer"},c.a.createElement(T.a,{events:t,localizer:_,startAccessor:"start",endAccessor:"end",views:["week","day","agenda"],defaultView:"week",scrollToTime:j,min:S,max:y,onRangeChange:function(e){var t={startDate:r.startDate,endDate:r.endDate,subjects:r.subjects,eventTypes:r.eventTypes};if(e.length)if(7===e.length)t.startDate=e[0],t.endDate=e[6],t.endDate.setHours(5);else{var n=e[0];(n<t.startDate||n>t.endDate)&&(t.startDate=p(n),t.endDate=f(n))}else t.startDate=e.start,t.endDate=e.end,t.endDate.setHours(5);t.startDate!==r.startDate&&t.endDate!==r.endDate&&s({type:w.UPDATE,payload:t})},onSelectEvent:function(e,t){h(e),function(e){d(e.currentTarget)}(t)}}),c.a.createElement(I.a,{id:m,open:v,anchorEl:u,onClose:function(){d(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}},c.a.createElement(z,{event:b})))},B=function(){var e=Object(a.useContext)(g).filterState,t=Object(a.useState)([]),n=Object(o.a)(t,2),r=n[0],s=n[1];return Object(a.useEffect)((function(){(function(e){return h.apply(this,arguments)})(e).then((function(e){if(e){var t=new Array;e.map((function(n){var a={allDay:!1,title:n.title,description:n.description,start:new Date(n.startDate),end:new Date(n.endDate),module:n.module,location:n.location,id:n.id};return t.push(a),e})),s(t)}}))}),[e]),c.a.createElement(c.a.Fragment,null,c.a.createElement(L,{eventList:r}))},W=function(){var e=Object(a.useReducer)(y,S,N),t=Object(o.a)(e,2),n=t[0],r=t[1];return c.a.createElement("div",{className:"App"},c.a.createElement(g.Provider,{value:{filterState:n,dispatch:r}},c.a.createElement("div",{className:"filterHolder"},c.a.createElement(O,null)),c.a.createElement(B,null)))};n(90),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[57,1,2]]]);
//# sourceMappingURL=main.00470c6f.chunk.js.map